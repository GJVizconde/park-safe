import{a as b,_ as v}from"./axios-Bf_j8lky.js";import{_ as p,r,i as w,o as l,c,a as t,n as u,t as o,j as y,k,d as S,b as C,w as D,e as x,F as f,f as P}from"./index-BDw6qmt6.js";const q="/images/down-blue-arrow.svg",A={name:"AccordionDiscrepancy",props:{id:String,name:String,view_more:String,licensePlate_title:String,licensePlate:String,description_title:String,description:String,quit_title:String,quit_id:String,transition_ms:{type:Number,default:1e3}},emits:["quitVehicle"],setup(d){const s=r(!1),i=r(null);let e=r(0);const _=w(()=>({[`transition-all duration-${d.transition_ms} ease-in-out`]:s,[`transition-height duration-${d.transition_ms} ease-in-out`]:!s}));return{accordionRef:i,accordionHeight:e,accordionClasses:_,isOpen:s,toggleAccordion:()=>{s.value=!s.value,k(()=>{s.value?e.value=i.value.scrollHeight:e.value=0})}}}},T={class:"w-full flex flex-col px-5 bg-white border"},B={class:"text-[#020C41]"},V={class:"bg-white flex gap-7"},O={class:"text-xs uppercase bg-white"},j={class:"text-xs uppercase bg-white"},H={class:"flex gap-2 items-center justify-center text-xs text-blue-600 select-none bg-white"},N={class:"no-underline bg-white"},E={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},R={class:"text-amTextGray bg-white"},z={class:"bg-white"},F={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},G={class:"text-amTextGray bg-white"},L={class:"bg-white"},I={class:"text-center bg-white"};function M(d,s,i,e,_,g){return l(),c("div",T,[t("section",B,[t("div",{class:u(["flex items-center py-5 justify-between border-[#D9D9D7] cursor-pointer bg-white",{"border-b ":e.isOpen}]),onClick:s[0]||(s[0]=(...n)=>e.toggleAccordion&&e.toggleAccordion(...n))},[t("div",V,[t("span",O,o(i.id),1),t("span",j,o(i.name),1)]),t("div",H,[t("a",N,o(i.view_more),1),t("img",{src:q,class:u([" select-none bg bg-white",{[`rotate-180 transition-all duration-${i.transition_ms}`]:e.isOpen,[`transition-all duration-${i.transition_ms}`]:!e.isOpen}])},null,2)])],2),t("div",{class:u(["text-xs text-left items-center justify-center bg-white overflow-hidden",e.accordionClasses]),style:y({height:e.isOpen?e.accordionHeight+"px":"0"}),ref:"accordionRef"},[t("div",E,[t("p",R,o(i.licensePlate_title),1),t("p",z,o(i.licensePlate),1)]),t("div",F,[t("p",G,o(i.description_title),1),t("p",L,o(i.description),1)]),t("div",I,[t("a",{onClick:s[1]||(s[1]=n=>d.$emit("quitVehicle",i.quit_id)),class:"text-amBlueInnovation my-5 mx-auto inline-block bg-red-400 rounded p-2 text-white"},o(i.quit_title),1)])],6)])])}const Q=p(A,[["render",M]]),U={class:"px-5 mt-10"},J={key:0,class:"flex flex-col m-auto min-w-[271px] w-3/4 pb-[20px] md:hidden"},K={class:"w-full"},W={key:1,class:"text-center text-2xl font-bold text-white"},$=S({__name:"TicketControl",setup(d){const s=r("https://park-safe-api.onrender.com/api"),i=r({email:"",id:"",label:"",name:"",password:"",passwordConfirm:""}),e=r(),_=async()=>{try{const n=(await b.get(`${s.value}/ticket/?active=true`)).data;e.value=n,console.log(e.value)}catch(n){console.error("Error al obtener los tickets activos:",n)}},g=async n=>{console.log("Hicieron click a dar salida",n);const h=(await b.patch(`${s.value}/ticket/${n}`)).data;console.log(h),await _()};return C(async()=>{await _()}),D(i.value,n=>{console.log(n)},{deep:!0}),(n,h)=>{var m;return l(),c(f,null,[x(v,{title:"Control Tickets"}),t("section",U,[(m=e.value)!=null&&m.length?(l(),c("div",J,[(l(!0),c(f,null,P(e.value,(a,X)=>(l(),c("div",K,[x(Q,{id:String(a.user.id),name:a.user.name,view_more:"ver mas",licensePlate_title:"Placa Vehículo",licensePlate:a.vehicle.licensePlate,description_title:"Descripción",description:a.vehicle.description,quit_title:"Dar Salida",quit_id:a.id,onQuitVehicle:g,class:u([" border-t-0",{"rounded-tr-lg rounded-tl-lg border-t  ":a===e.value[0],"rounded-br-lg rounded-bl-lg ":a===e.value[e.value.length-1]}])},null,8,["id","name","licensePlate","description","quit_id","class"])]))),256))])):(l(),c("h1",W," No hay tickets activos en este momento "))])],64)}}});export{$ as default};
