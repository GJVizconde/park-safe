import{d as S,r as t,w as d,c as u,e as p,a as m,F as f,f as T,u as x,g as P,o as r,h as g}from"./index-Ckgh3sli.js";import{_ as F,a as V}from"./axios-0SNjeisp.js";import{i as I}from"./index-DIXsZzZI.js";import{_ as U,B as A}from"./ButtonForm-4NSROQo1.js";const D={id:{label:"Cédula",placeholder:"Número de cédula",type:"number"},password:{label:"Password",placeholder:"Ingresar Password",type:"password",eyeIcon:"true"}},N={class:"px-5"},E={class:"flex justify-center items-center mt-[50px]"},G=S({__name:"UserLogin",setup(R){const h=t("https://park-safe-api.onrender.com/api"),w=P(),_=()=>{w.push({path:"/"})},s=t({email:"",id:"",label:"",username:"",password:"",passwordConfirm:""}),n=t({name:"",id:"",email:"",role:"",hasTicket:!1,token:""});let c=t("password"),i=t("password");const b=()=>{I.success("Inicio de Sesion, exitoso !",{theme:"colored",autoClose:2e3,onClose:_,position:"bottom-center"})},v=(e,a)=>{a==="Password"?c.value=e:i.value=e},y=(e,a)=>e==="Password"?c.value:e==="Confirmar Password"?i.value:a,C=async()=>{const e=(await V.post(`${h.value}/auth/login`,{id:s.value.id,password:s.value.password})).data,a=e.user,o=e.token;n.value={id:a.id,name:a.name,email:a.email,role:a.role,hasTicket:a.hasTicket,token:o}},k=async()=>{try{await C(),b()}catch(e){console.log("Error iniciando sesion:",e)}};return d(s.value,e=>{},{deep:!0}),d(n,e=>{window.localStorage.setItem("userSession",JSON.stringify(e))},{deep:!0}),(e,a)=>(r(),u(f,null,[p(F,{title:"Acceso"}),m("section",N,[(r(!0),u(f,null,T(x(D),(o,l)=>(r(),g(U,{modelValue:s.value[l],"onUpdate:modelValue":B=>s.value[l]=B,id:o.label,name:o.label,key:l,label:o.label,placeholder:o.placeholder,type:y(o.label,o.type),labelFor:o.label,icon:!!o.label.toUpperCase().includes("PASSWORD"),onChangeType:v},null,8,["modelValue","onUpdate:modelValue","id","name","label","placeholder","type","labelFor","icon"]))),128))]),m("div",E,[p(A,{label:"Acceder",buttonType:"inputForm",size:"standard-form",onClick:k})])],64))}});export{G as default};
