import{i as p}from"./index-BacjHjJ9.js";import{a as x,_ as w}from"./axios-iTDiG_qe.js";import{_ as y,r,i as k,o as c,c as l,a as t,n as g,t as n,j as S,k as C,d as D,b as P,w as T,e as f,F as v,f as q,g as A}from"./index-Clvp6r8e.js";const B="/images/down-blue-arrow.svg",V={name:"AccordionDiscrepancy",props:{id:String,name:String,view_more:String,licensePlate_title:String,licensePlate:String,description_title:String,description:String,quit_title:String,quit_id:String,transition_ms:{type:Number,default:1e3}},emits:["quitVehicle"],setup(d){const s=r(!1),i=r(null);let e=r(0);const _=k(()=>({[`transition-all duration-${d.transition_ms} ease-in-out`]:s,[`transition-height duration-${d.transition_ms} ease-in-out`]:!s}));return{accordionRef:i,accordionHeight:e,accordionClasses:_,isOpen:s,toggleAccordion:()=>{s.value=!s.value,C(()=>{s.value?e.value=i.value.scrollHeight:e.value=0})}}}},O={class:"w-full flex flex-col px-5 bg-white border"},j={class:"text-[#020C41]"},H={class:"bg-white flex gap-7"},N={class:"text-xs uppercase bg-white"},R={class:"text-xs uppercase bg-white"},E={class:"flex gap-2 items-center justify-center text-xs text-blue-600 select-none bg-white"},z={class:"no-underline bg-white"},F={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},G={class:"text-amTextGray bg-white"},L={class:"bg-white"},I={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},M={class:"text-amTextGray bg-white"},Q={class:"bg-white"},U={class:"text-center bg-white"};function J(d,s,i,e,_,h){return c(),l("div",O,[t("section",j,[t("div",{class:g(["flex items-center py-5 justify-between border-[#D9D9D7] cursor-pointer bg-white",{"border-b ":e.isOpen}]),onClick:s[0]||(s[0]=(...u)=>e.toggleAccordion&&e.toggleAccordion(...u))},[t("div",H,[t("span",N,n(i.id),1),t("span",R,n(i.name),1)]),t("div",E,[t("a",z,n(i.view_more),1),t("img",{src:B,class:g([" select-none bg bg-white",{[`rotate-180 transition-all duration-${i.transition_ms}`]:e.isOpen,[`transition-all duration-${i.transition_ms}`]:!e.isOpen}])},null,2)])],2),t("div",{class:g(["text-xs text-left items-center justify-center bg-white overflow-hidden",e.accordionClasses]),style:S({height:e.isOpen?e.accordionHeight+"px":"0"}),ref:"accordionRef"},[t("div",F,[t("p",G,n(i.licensePlate_title),1),t("p",L,n(i.licensePlate),1)]),t("div",I,[t("p",M,n(i.description_title),1),t("p",Q,n(i.description),1)]),t("div",U,[t("a",{onClick:s[1]||(s[1]=u=>d.$emit("quitVehicle",i.quit_id)),class:"text-amBlueInnovation my-5 mx-auto inline-block bg-red-400 rounded p-2 text-white"},n(i.quit_title),1)])],6)])])}const K=y(V,[["render",J]]),W={class:"px-5 mt-10"},X={key:0,class:"flex flex-col m-auto min-w-[271px] w-3/4 pb-[20px] md:hidden"},Y={class:"w-full"},Z={key:1,class:"text-center text-2xl font-bold text-white"},se=D({__name:"TicketControl",setup(d){const s=r("https://park-safe-api.onrender.com/api"),i=r({email:"",id:"",label:"",name:"",password:"",passwordConfirm:""});A();const e=r(),_=async()=>{try{const o=(await x.get(`${s.value}/ticket/?active=true`)).data;e.value=o,console.log(e.value)}catch(o){console.error("Error al obtener los tickets activos:",o)}},h=()=>{p.success("Se le dió salida al vehículo",{theme:"colored",autoClose:2e3,position:"bottom-center"})},u=async o=>{console.log("Hicieron click a dar salida",o);const m=(await x.patch(`${s.value}/ticket/${o}`)).data;h(),console.log(m),await _()};return P(async()=>{await _()}),T(i.value,o=>{console.log(o)},{deep:!0}),(o,m)=>{var b;return c(),l(v,null,[f(w,{title:"Control Tickets"}),t("section",W,[(b=e.value)!=null&&b.length?(c(),l("div",X,[(c(!0),l(v,null,q(e.value,(a,$)=>(c(),l("div",Y,[f(K,{id:String(a.user.id),name:a.user.name,view_more:"ver mas",licensePlate_title:"Placa Vehículo",licensePlate:a.vehicle.licensePlate,description_title:"Descripción",description:a.vehicle.description,quit_title:"Dar Salida",quit_id:a.id,onQuitVehicle:u,class:g([" border-t-0",{"rounded-tr-lg rounded-tl-lg border-t  ":a===e.value[0],"rounded-br-lg rounded-bl-lg ":a===e.value[e.value.length-1]}])},null,8,["id","name","licensePlate","description","quit_id","class"])]))),256))])):(c(),l("h1",Z," No hay tickets activos en este momento "))])],64)}}});export{se as default};
