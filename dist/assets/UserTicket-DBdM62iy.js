import{a as h,_ as m}from"./axios-CI7ScryZ.js";import{d as b,r,b as k,w as f,c as a,e as B,a as t,u as _,F as g,f as v,o,t as c}from"./index-CD251zb6.js";const x={class:"flex flex-col gap-8 items-center justify-center mt-10 px-11"},y={key:0},w=t("p",{class:"bg-ticketBg font-bold"},"Cliente:",-1),N={class:"bg-ticketBg"},S=t("p",{class:"bg-ticketBg font-bold"},"Vehiculo:",-1),T={class:"bg-ticketBg"},E=t("p",{class:"bg-ticketBg font-bold"},"Puesto:",-1),D={class:"bg-ticketBg"},F=t("p",{class:"bg-ticketBg font-bold"},"Empleado:",-1),I={class:"bg-ticketBg"},U=t("p",{class:"bg-ticketBg font-bold"},"Fecha:",-1),V={class:"bg-ticketBg"},$={key:1,class:"text-center text-2xl font-bold text-white"},P=b({__name:"UserTicket",setup(j){const u=r("http://localhost:3001/api");let l=r([{name:"",collaborator:"",vehicle_id:"",place:"",current_date:""}]);const n=r({name:"",id:"",email:"",role:"",token:"",hasTicket:!1}),d=async s=>{var i;try{const e=(await h.get(`${u.value}/ticket/userTicket?id=${s}`)).data;l.value=[{name:e.user.name,collaborator:(i=e==null?void 0:e.collaborators[0])==null?void 0:i.name,vehicle_id:e.vehicle.licensePlate,place:e.parkingId,current_date:e.checkIn}]}catch(e){console.error("Error al obtener el ticket:",e)}};return k(async()=>{const s=localStorage.getItem("userSession");n.value=s?JSON.parse(s):{name:"",id:"",email:"",role:"",token:"",hasTicket:!1},n.value.hasTicket&&await d(Number(n.value.id))}),f(n.value,async s=>{await d(Number(s.id))},{deep:!0}),(s,i)=>(o(),a(g,null,[B(m,{title:"User Ticket"}),t("section",x,[_(l)[0].name!==""?(o(),a("div",y,[(o(!0),a(g,null,v(_(l),(e,p)=>(o(),a("div",{class:"grid grid-cols-2 gap-y-5 bg-ticketBg w-full p-7 rounded-2xl items-center justify-center",key:p},[w,t("p",N,c(e.name),1),S,t("p",T,c(e.vehicle_id),1),E,t("p",D,c(e.place),1),F,t("p",I,c(e.collaborator),1),U,t("p",V,c(e.current_date),1)]))),128))])):(o(),a("h1",$," No tienes ningún vehículo en el estacionamiento "))])],64))}});export{P as default};
