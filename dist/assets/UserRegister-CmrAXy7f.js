import{_ as C,B as S}from"./ButtonForm-BMF6ALB_.js";import{_ as x}from"./ParkSafeLayout.vue_vue_type_script_setup_true_lang-BV3p-AuR.js";import{u as y}from"./userRegisterData-9PWQlLnu.js";import{a as d}from"./axios-Cm0UX6qg.js";import{d as F,r as s,w as p,b as V,c as m,e as f,a as h,F as _,f as P,u as U,g as T,o as c,h as $}from"./index-CKWpLhK3.js";const A={class:"px-5"},D={class:"flex justify-center items-center mt-[50px]"},O=F({__name:"UserRegister",setup(N){const n=s("https://park-safe-api.onrender.com/api"),l=s({email:"",id:"",label:"",name:"",password:"",passwordConfirm:""}),t=s({name:"",id:"",email:"",role:"",token:""});let i=s("password"),u=s("password");const v=(e,o)=>{o==="Password"?i.value=e:u.value=e},w=(e,o)=>e==="Password"?i.value:e==="Confirmar Password"?u.value:o,b=T(),g=()=>{b.push({path:"/"})},k=()=>{console.log("Hola",n.value),console.log("Me hicierÃ³n click"),d.post(`${n.value}/auth/register`,l.value).then(e=>{console.log("responsedata",e.data)}).then(()=>{d.post(`${n.value}/auth/login`,{id:l.value.id,password:l.value.password}).then(e=>{const o=e.data.user,a=e.data.token;console.log(o),t.value={id:o.id,name:o.name,email:o.email,role:o.role,token:a},console.log("userSessionAxios",t.value),g()})}).catch(e=>{console.log(e)})};return p(l.value,e=>{console.log(e)},{deep:!0}),p(t,e=>{window.localStorage.setItem("userSession",JSON.stringify(e)),console.log(t.value)},{deep:!0}),V(()=>{}),(e,o)=>(c(),m(_,null,[f(x,{title:"Registro"}),h("section",A,[(c(!0),m(_,null,P(U(y),(a,r)=>(c(),$(C,{modelValue:l.value[r],"onUpdate:modelValue":B=>l.value[r]=B,key:r,id:a.label,name:a.label,label:a.label,placeholder:a.placeholder,type:w(a.label,a.type),labelFor:a.label,icon:!!a.label.toUpperCase().includes("PASSWORD"),onChangeType:v},null,8,["modelValue","onUpdate:modelValue","id","name","label","placeholder","type","labelFor","icon"]))),128))]),h("div",D,[f(S,{label:"Registrar",buttonType:"inputForm",size:"standard-form",onClick:k})])],64))}});export{O as default};
