import{_ as B,B as C}from"./ButtonForm-Cwmx2fdd.js";import{_ as S}from"./ParkSafeLayout.vue_vue_type_script_setup_true_lang-xjHvjoF1.js";import{a as k}from"./axios-Cm0UX6qg.js";import{d as x,r as s,w as i,c as p,e as m,a as f,F as h,f as P,u as A,g as F,o as n,h as U}from"./index-BP6hUVtC.js";const V={id:{label:"Cédula",placeholder:"Número de cédula",type:"number"},password:{label:"Password",placeholder:"Ingresar Password",type:"password",eyeIcon:"true"}},I={class:"px-5"},N={class:"flex justify-center items-center mt-[50px]"},O=x({__name:"UserLogin",setup(R){const c=s("https://park-safe-api.onrender.com/api"),_=F(),w=()=>{_.push({path:"/home",state:{refresh:!0}})},l=s({email:"",id:"",label:"",username:"",password:"",passwordConfirm:""}),t=s({name:"",id:"",email:"",role:"",token:""});let d=s("password"),u=s("password");const b=(e,a)=>{a==="Password"?d.value=e:u.value=e},v=(e,a)=>e==="Password"?d.value:e==="Confirmar Password"?u.value:a,g=()=>{console.log("Me hicierón clicko"),console.log("BASE_URL",c.value),k.post(`${c.value}/auth/login`,{id:l.value.id,password:l.value.password}).then(e=>{const a=e.data.user,o=e.data.token;console.log(a),t.value={id:a.id,name:a.name,email:a.email,role:a.role,token:o},console.log("userSessionAxios",t.value),w()}).catch(e=>{console.log(e)})};return i(l.value,e=>{console.log(e)},{deep:!0}),i(t,e=>{window.localStorage.setItem("userSession",JSON.stringify(e)),console.log(t.value)},{deep:!0}),(e,a)=>(n(),p(h,null,[m(S,{title:"Acceso"}),f("section",I,[(n(!0),p(h,null,P(A(V),(o,r)=>(n(),U(B,{modelValue:l.value[r],"onUpdate:modelValue":y=>l.value[r]=y,id:o.label,name:o.label,key:r,label:o.label,placeholder:o.placeholder,type:v(o.label,o.type),labelFor:o.label,icon:!!o.label.toUpperCase().includes("PASSWORD"),onChangeType:b},null,8,["modelValue","onUpdate:modelValue","id","name","label","placeholder","type","labelFor","icon"]))),128))]),f("div",N,[m(C,{label:"Acceder",buttonType:"inputForm",size:"standard-form",onClick:g})])],64))}});export{O as default};
