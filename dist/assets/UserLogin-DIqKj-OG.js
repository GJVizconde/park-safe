import{_ as y,B}from"./ButtonForm-BMF6ALB_.js";import{_ as C}from"./ParkSafeLayout.vue_vue_type_script_setup_true_lang-BV3p-AuR.js";import{a as S}from"./axios-Cm0UX6qg.js";import{d as x,r as s,w as u,c as p,e as m,a as f,F as h,f as P,u as T,g as A,o as n,h as F}from"./index-CKWpLhK3.js";const U={id:{label:"Cédula",placeholder:"Número de cédula",type:"number"},password:{label:"Password",placeholder:"Ingresar Password",type:"password",eyeIcon:"true"}},V={class:"px-5"},I={class:"flex justify-center items-center mt-[50px]"},O=x({__name:"UserLogin",setup(N){const c=s("https://park-safe-api.onrender.com/api"),_=A(),w=()=>{_.push({path:"/"})},l=s({email:"",id:"",label:"",username:"",password:"",passwordConfirm:""}),t=s({name:"",id:"",email:"",role:"",hasTicket:!1,token:""});let d=s("password"),i=s("password");const b=(e,a)=>{a==="Password"?d.value=e:i.value=e},v=(e,a)=>e==="Password"?d.value:e==="Confirmar Password"?i.value:a,k=()=>{console.log("Me hicierón clicko"),console.log("BASE_URL",c.value),S.post(`${c.value}/auth/login`,{id:l.value.id,password:l.value.password}).then(e=>{const a=e.data.user,o=e.data.token;console.log(a),t.value={id:a.id,name:a.name,email:a.email,role:a.role,hasTicket:a.hasTicket,token:o},console.log("userSessionAxios",t.value),w()}).catch(e=>{console.log(e)})};return u(l.value,e=>{console.log(e)},{deep:!0}),u(t,e=>{window.localStorage.setItem("userSession",JSON.stringify(e)),console.log(t.value)},{deep:!0}),(e,a)=>(n(),p(h,null,[m(C,{title:"Acceso"}),f("section",V,[(n(!0),p(h,null,P(T(U),(o,r)=>(n(),F(y,{modelValue:l.value[r],"onUpdate:modelValue":g=>l.value[r]=g,id:o.label,name:o.label,key:r,label:o.label,placeholder:o.placeholder,type:v(o.label,o.type),labelFor:o.label,icon:!!o.label.toUpperCase().includes("PASSWORD"),onChangeType:b},null,8,["modelValue","onUpdate:modelValue","id","name","label","placeholder","type","labelFor","icon"]))),128))]),f("div",I,[m(B,{label:"Acceder",buttonType:"inputForm",size:"standard-form",onClick:k})])],64))}});export{O as default};
