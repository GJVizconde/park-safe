import{i as v}from"./index-D5v_gyjY.js";import{a as b,_ as p}from"./axios-DDMEASdQ.js";import{_ as w,r,i as y,o as c,c as l,a as t,n as g,t as n,j as k,k as S,d as C,b as q,w as P,e as x,F as f,f as T,g as A}from"./index-CZdK8FCn.js";const D="/images/down-blue-arrow.svg",B={name:"AccordionDiscrepancy",props:{id:String,name:String,view_more:String,licensePlate_title:String,licensePlate:String,description_title:String,description:String,quit_title:String,quit_id:String,transition_ms:{type:Number,default:1e3}},emits:["quitVehicle"],setup(d){const s=r(!1),i=r(null);let e=r(0);const _=y(()=>({[`transition-all duration-${d.transition_ms} ease-in-out`]:s,[`transition-height duration-${d.transition_ms} ease-in-out`]:!s}));return{accordionRef:i,accordionHeight:e,accordionClasses:_,isOpen:s,toggleAccordion:()=>{s.value=!s.value,S(()=>{s.value?e.value=i.value.scrollHeight:e.value=0})}}}},V={class:"w-full flex flex-col px-5 bg-white border"},O={class:"text-[#020C41]"},j={class:"bg-white flex gap-7"},N={class:"text-xs uppercase bg-white"},R={class:"text-xs uppercase bg-white"},E={class:"flex gap-2 items-center justify-center text-xs text-blue-600 select-none bg-white"},H={class:"no-underline bg-white"},z={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},F={class:"text-amTextGray bg-white"},G={class:"bg-white"},L={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},I={class:"text-amTextGray bg-white"},M={class:"bg-white"},Q={class:"text-center bg-white"};function U(d,s,i,e,_,h){return c(),l("div",V,[t("section",O,[t("div",{class:g(["flex items-center py-5 justify-between border-[#D9D9D7] cursor-pointer bg-white",{"border-b ":e.isOpen}]),onClick:s[0]||(s[0]=(...u)=>e.toggleAccordion&&e.toggleAccordion(...u))},[t("div",j,[t("span",N,n(i.id),1),t("span",R,n(i.name),1)]),t("div",E,[t("a",H,n(i.view_more),1),t("img",{src:D,class:g([" select-none bg bg-white",{[`rotate-180 transition-all duration-${i.transition_ms}`]:e.isOpen,[`transition-all duration-${i.transition_ms}`]:!e.isOpen}])},null,2)])],2),t("div",{class:g(["text-xs text-left items-center justify-center bg-white overflow-hidden",e.accordionClasses]),style:k({height:e.isOpen?e.accordionHeight+"px":"0"}),ref:"accordionRef"},[t("div",z,[t("p",F,n(i.licensePlate_title),1),t("p",G,n(i.licensePlate),1)]),t("div",L,[t("p",I,n(i.description_title),1),t("p",M,n(i.description),1)]),t("div",Q,[t("a",{onClick:s[1]||(s[1]=u=>d.$emit("quitVehicle",i.quit_id)),class:"text-amBlueInnovation my-5 mx-auto inline-block bg-red-400 rounded p-2 text-white"},n(i.quit_title),1)])],6)])])}const J=w(B,[["render",U]]),K={class:"px-5 mt-10"},W={key:0,class:"flex flex-col m-auto min-w-[271px] w-3/4 pb-[20px] md:hidden"},X={class:"w-full"},Y={key:1,class:"text-center text-2xl font-bold text-white"},se=C({__name:"TicketControl",setup(d){const s=r("https://park-safe-api.onrender.com/api"),i=r({email:"",id:"",label:"",name:"",password:"",passwordConfirm:""});A();const e=r(),_=async()=>{try{const o=(await b.get(`${s.value}/ticket/?active=true`)).data;e.value=o}catch(o){console.error("Error al obtener los tickets activos:",o)}},h=()=>{v.success("Se le dió salida al vehículo",{theme:"colored",autoClose:2e3,position:"bottom-center"})},u=async o=>{(await b.patch(`${s.value}/ticket/${o}`)).data,h(),await _()};return q(async()=>{await _()}),P(i.value,o=>{},{deep:!0}),(o,Z)=>{var m;return c(),l(f,null,[x(p,{title:"Control Tickets"}),t("section",K,[(m=e.value)!=null&&m.length?(c(),l("div",W,[(c(!0),l(f,null,T(e.value,(a,$)=>(c(),l("div",X,[x(J,{id:String(a.user.id),name:a.user.name,view_more:"ver mas",licensePlate_title:"Placa Vehículo",licensePlate:a.vehicle.licensePlate,description_title:"Descripción",description:a.vehicle.description,quit_title:"Dar Salida",quit_id:a.id,onQuitVehicle:u,class:g([" border-t-0",{"rounded-tr-lg rounded-tl-lg border-t  ":a===e.value[0],"rounded-br-lg rounded-bl-lg ":a===e.value[e.value.length-1]}])},null,8,["id","name","licensePlate","description","quit_id","class"])]))),256))])):(c(),l("h1",Y," No hay vehículos en este momento en el estacionamiento "))])],64)}}});export{se as default};
