import{i as p}from"./index-Ca3uToay.js";import{a as b,_ as v}from"./axios-13T00cW0.js";import{_ as w,r as c,i as y,o as l,c as r,a as e,n as u,t as o,j as S,k,d as C,b as T,w as q,e as x,F as f,f as P,g as A}from"./index-hCltwbQq.js";const D="/images/down-blue-arrow.svg",B={name:"AccordionDiscrepancy",props:{id:String,name:String,view_more:String,licensePlate_title:String,licensePlate:String,description_title:String,description:String,time_title:String,time:String,collaborator_title:String,collaborator:String,quit_title:String,quit_id:String,transition_ms:{type:Number,default:1e3}},emits:["quitVehicle"],setup(d){const s=c(!1),t=c(null);let i=c(0);const _=y(()=>({[`transition-all duration-${d.transition_ms} ease-in-out`]:s,[`transition-height duration-${d.transition_ms} ease-in-out`]:!s}));return{accordionRef:t,accordionHeight:i,accordionClasses:_,isOpen:s,toggleAccordion:()=>{s.value=!s.value,k(()=>{s.value?i.value=t.value.scrollHeight:i.value=0})}}}},V={class:"w-full flex flex-col px-5 bg-white border"},O={class:"text-[#020C41]"},j={class:"bg-white flex gap-7"},E={class:"text-xs uppercase bg-white"},G={class:"text-xs uppercase bg-white"},H={class:"flex gap-2 items-center justify-center text-xs text-blue-600 select-none bg-white"},N={class:"no-underline bg-white"},R={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},z={class:"text-amTextGray bg-white"},F={class:"bg-white"},I={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},L={class:"text-amTextGray bg-white"},M={class:"bg-white"},Q={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},U={class:"text-amTextGray bg-white"},J={class:"bg-white"},K={class:"grid grid-cols-[1fr_3fr] border-b pb-5 gap-x-2 pt-5 items-center bg-white"},W={class:"text-amTextGray bg-white"},X={class:"bg-white"},Y={class:"text-center bg-white"};function Z(d,s,t,i,_,h){return l(),r("div",V,[e("section",O,[e("div",{class:u(["flex items-center py-5 justify-between border-[#D9D9D7] cursor-pointer bg-white",{"border-b ":i.isOpen}]),onClick:s[0]||(s[0]=(...g)=>i.toggleAccordion&&i.toggleAccordion(...g))},[e("div",j,[e("span",E,o(t.id),1),e("span",G,o(t.name),1)]),e("div",H,[e("a",N,o(t.view_more),1),e("img",{src:D,class:u([" select-none bg bg-white",{[`rotate-180 transition-all duration-${t.transition_ms}`]:i.isOpen,[`transition-all duration-${t.transition_ms}`]:!i.isOpen}])},null,2)])],2),e("div",{class:u(["text-xs text-left items-center justify-center bg-white overflow-hidden",i.accordionClasses]),style:S({height:i.isOpen?i.accordionHeight+"px":"0"}),ref:"accordionRef"},[e("div",R,[e("p",z,o(t.licensePlate_title),1),e("p",F,o(t.licensePlate),1)]),e("div",I,[e("p",L,o(t.description_title),1),e("p",M,o(t.description),1)]),e("div",Q,[e("p",U,o(t.time_title),1),e("p",J,o(t.time),1)]),e("div",K,[e("p",W,o(t.collaborator_title),1),e("p",X,o(t.collaborator),1)]),e("div",Y,[e("a",{onClick:s[1]||(s[1]=g=>d.$emit("quitVehicle",t.quit_id)),class:"text-amBlueInnovation my-5 mx-auto inline-block bg-red-400 rounded p-2 text-white"},o(t.quit_title),1)])],6)])])}const $=w(B,[["render",Z]]),ee={class:"px-5 mt-10"},te={key:0,class:"flex flex-col m-auto min-w-[271px] w-3/4 pb-[20px] md:hidden"},ie={class:"w-full"},se={key:1,class:"text-center text-2xl font-bold text-white"},ce=C({__name:"TicketControl",setup(d){const s=c("https://park-safe-api.onrender.com/api"),t=c({email:"",id:"",label:"",name:"",password:"",passwordConfirm:""});A();const i=c(),_=async()=>{try{const n=(await b.get(`${s.value}/ticket/?active=true`)).data;i.value=n}catch(n){console.error("Error al obtener los tickets activos:",n)}},h=()=>{p.success("Se le dió salida al vehículo",{theme:"colored",autoClose:2e3,position:"bottom-center"})},g=async n=>{(await b.patch(`${s.value}/ticket/${n}`)).data,h(),await _()};return T(async()=>{await _()}),q(t.value,n=>{},{deep:!0}),(n,oe)=>{var m;return l(),r(f,null,[x(v,{title:"Control Tickets"}),e("section",ee,[(m=i.value)!=null&&m.length?(l(),r("div",te,[(l(!0),r(f,null,P(i.value,(a,ae)=>(l(),r("div",ie,[x($,{id:String(a.user.id),name:a.user.name,view_more:"ver mas",licensePlate_title:"Placa Vehículo:",licensePlate:a.vehicle.licensePlate,description_title:"Descripción:",description:a.vehicle.description,time_title:"Hora de entrada:",time:a.checkIn,collaborator_title:"Empleado:",collaborator:a.collaborators[0].name,quit_title:"Dar Salida",quit_id:a.id,onQuitVehicle:g,class:u([" border-t-0",{"rounded-tr-lg rounded-tl-lg border-t  ":a===i.value[0],"rounded-br-lg rounded-bl-lg ":a===i.value[i.value.length-1]}])},null,8,["id","name","licensePlate","description","time","collaborator","quit_id","class"])]))),256))])):(l(),r("h1",se," No hay vehículos en este momento en el estacionamiento "))])],64)}}});export{ce as default};
