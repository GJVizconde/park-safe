import{d as S,r as l,w as u,c as p,e as m,a as f,F as h,f as B,u as x,g as T,o as r,h as P}from"./index-Clvp6r8e.js";import{_ as A,a as F}from"./axios-iTDiG_qe.js";import{i as U}from"./index-BacjHjJ9.js";import{_ as V,B as I}from"./ButtonForm-fsE9RK2k.js";const D={id:{label:"Cédula",placeholder:"Número de cédula",type:"number"},password:{label:"Password",placeholder:"Ingresar Password",type:"password",eyeIcon:"true"}},E={class:"px-5"},N={class:"flex justify-center items-center mt-[50px]"},G=S({__name:"UserLogin",setup(R){const c=l("https://park-safe-api.onrender.com/api"),w=T(),_=()=>{w.push({path:"/"})},s=l({email:"",id:"",label:"",username:"",password:"",passwordConfirm:""}),t=l({name:"",id:"",email:"",role:"",hasTicket:!1,token:""});let i=l("password"),d=l("password");const b=()=>{U.success("Inicio de Sesion, exitoso !",{theme:"colored",autoClose:2e3,onClose:_,position:"bottom-center"})},v=(e,o)=>{o==="Password"?i.value=e:d.value=e},g=(e,o)=>e==="Password"?i.value:e==="Confirmar Password"?d.value:o,y=async()=>{const e=(await F.post(`${c.value}/auth/login`,{id:s.value.id,password:s.value.password})).data;console.log(e);const o=e.user,a=e.token;console.log(o),t.value={id:o.id,name:o.name,email:o.email,role:o.role,hasTicket:o.hasTicket,token:a}},k=async()=>{console.log("Me hicierón clicko"),console.log("BASE_URL",c.value);try{await y(),console.log("userSessionAxios",t.value),b()}catch(e){console.log("Error iniciando sesion:",e)}};return u(s.value,e=>{console.log(e)},{deep:!0}),u(t,e=>{window.localStorage.setItem("userSession",JSON.stringify(e)),console.log(t.value)},{deep:!0}),(e,o)=>(r(),p(h,null,[m(A,{title:"Acceso"}),f("section",E,[(r(!0),p(h,null,B(x(D),(a,n)=>(r(),P(V,{modelValue:s.value[n],"onUpdate:modelValue":C=>s.value[n]=C,id:a.label,name:a.label,key:n,label:a.label,placeholder:a.placeholder,type:g(a.label,a.type),labelFor:a.label,icon:!!a.label.toUpperCase().includes("PASSWORD"),onChangeType:v},null,8,["modelValue","onUpdate:modelValue","id","name","label","placeholder","type","labelFor","icon"]))),128))]),f("div",N,[m(I,{label:"Acceder",buttonType:"inputForm",size:"standard-form",onClick:k})])],64))}});export{G as default};
