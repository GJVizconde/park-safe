import{_ as S,B as I}from"./ButtonForm-CNNmUkSQ.js";import{_ as B,a as c}from"./axios-Bf_j8lky.js";import{d as P,r as t,w as p,b as m,c as h,e as f,a as v,F as g,f as x,u as N,g as A,o as d,h as D}from"./index-BDw6qmt6.js";const F={id:{label:"Cédula",placeholder:"Número de cédula",type:"number"},name:{label:"Nombre",placeholder:"Ingresar nombre",type:"text"},email:{label:"Email",placeholder:"Ingresar correo eléctronico",type:"email"},password:{label:"Password",placeholder:"Ingresar Password",type:"password",eyeIcon:"true"},passwordConfirm:{label:"Confirmar Password",placeholder:"Confirmar Password",type:"password",eyeIcon:"true"}},O={class:"px-5"},T={class:"flex justify-center items-center mt-[50px]"},L=P({__name:"UserRegister",setup(V){const r=t("https://park-safe-api.onrender.com/api"),a=t({email:"",id:"",label:"",name:"",password:"",passwordConfirm:""}),s=t({name:"",id:"",email:"",role:"",token:""});let i=t("password"),u=t("password");const w=(e,o)=>{o==="Password"?i.value=e:u.value=e},b=(e,o)=>e==="Password"?i.value:e==="Confirmar Password"?u.value:o,_=A(),y=()=>{_.push({path:"/"})},C=()=>{console.log(s.value.role==="ADMIN"),s.value.role==="ADMIN"?(console.log("Hola",r.value),console.log("Me hicierón click"),c.post(`${r.value}/collaborator/register`,{email:a.value.email,id:a.value.id,name:a.value.name,password:a.value.password,role:"COLLABORATOR"}).then(e=>{console.log("responsedata",e.data)}).catch(e=>{console.log(e)})):(console.log("Hola",r.value),console.log("Me hicierón click"),c.post(`${r.value}/auth/register`,a.value).then(e=>{console.log("responsedata",e.data)}).then(()=>{c.post(`${r.value}/auth/login`,{id:a.value.id,password:a.value.password}).then(e=>{const o=e.data.user,l=e.data.token;console.log(o),s.value={id:o.id,name:o.name,email:o.email,role:o.role,token:l},console.log("userSessionAxios",s.value),y()})}).catch(e=>{console.log(e)}))};return p(a.value,e=>{console.log(e)},{deep:!0}),p(s,e=>{window.localStorage.setItem("userSession",JSON.stringify(e)),console.log(s.value)},{deep:!0}),m(()=>{const e=localStorage.getItem("userSession");s.value=e?JSON.parse(e):{name:"",id:"",email:"",role:"",hasTicket:!1,token:""},console.log(s.value.role)}),m(()=>{}),(e,o)=>(d(),h(g,null,[f(B,{title:"Registro"}),v("section",O,[(d(!0),h(g,null,x(N(F),(l,n)=>(d(),D(S,{modelValue:a.value[n],"onUpdate:modelValue":k=>a.value[n]=k,key:n,id:l.label,name:l.label,label:l.label,placeholder:l.placeholder,type:b(l.label,l.type),labelFor:l.label,icon:!!l.label.toUpperCase().includes("PASSWORD"),onChangeType:w},null,8,["modelValue","onUpdate:modelValue","id","name","label","placeholder","type","labelFor","icon"]))),128))]),v("div",T,[f(I,{label:"Registrar",buttonType:"inputForm",size:"standard-form",onClick:C})])],64))}});export{L as default};
